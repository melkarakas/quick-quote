<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Quick Estimate - Rockdale Homes</title>
    <!-- Bootstrap 5 CSS for modern styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
      /* Global Styles */
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #ffffff;
        margin: 0;
        padding: 20px;
        color: #333;
      }
      .calculator-container {
        max-width: 1000px;
        margin: 50px auto;
        background: #fff;
        border-radius: 15px;
        padding: 40px 30px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        position: relative;
      }
      .calculator-container h2 {
        font-weight: 700;
        margin-bottom: 20px;
        color: #000;
        text-align: center;
      }
      .form-control {
        border-radius: 10px;
        border: 1px solid #e0e0e0;
        font-size: 1rem;
      }
      .form-control:focus {
        border-color: #F1B84B;
        box-shadow: 0 0 0 0.2rem rgba(241, 184, 75, 0.25);
      }
      .form-group label {
        font-weight: 600;
      }
      .btn-custom {
        background-color: #F1B84B;
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-size: 1rem;
        font-weight: 600;
        color: #fff;
        transition: background-color 0.3s ease;
      }
      .btn-custom:hover {
        background-color: #d1a13b;
      }
      .btn-custom-sm {
        background-color: #F1B84B;
        border: none;
        border-radius: 8px;
        padding: 8px 16px;
        font-size: 0.85rem;
        font-weight: 600;
        color: #fff;
        transition: background-color 0.3s ease;
      }
      .btn-custom-sm:hover {
        background-color: #d1a13b;
      }
      /* Card and Feature Styles */
      .project-card,
      .feature-card {
        position: relative;
        cursor: pointer;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        transition: all 0.3s ease;
        height: 150px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        overflow: hidden;
      }
      .project-card:hover,
      .feature-card:hover {
        border-color: #F1B84B;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }
      .selected {
        border-color: #F1B84B;
        border-width: 3px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }
      .card-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
        border-radius: 10px;
        z-index: 1;
      }
      .card .card-body {
        position: relative;
        z-index: 2;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        padding: 10px;
        text-align: center;
      }
      .card .card-title {
        font-size: clamp(0.8rem, 1.5vw, 1.2rem);
        margin: 0;
        color: #fff;
        word-wrap: break-word;
      }
      .nav-back {
        margin-bottom: 20px;
      }
      .quote-display h4 {
        font-weight: 700;
        color: #000;
      }
      .quote-display p {
        font-size: 1.75rem;
        font-weight: 700;
        color: #F1B84B;
      }
      .contact-info-section,
      .mb-3 {
        margin-bottom: 30px;
      }
      h5,
      h6 {
        color: #000;
      }
      /* Toggle Button Styling for Basement Mode */
      .toggle-button {
        margin-right: 10px;
        border: 2px solid #F1B84B;
        border-radius: 10px;
        background-color: #fff;
        color: #F1B84B;
        padding: 10px 20px;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        cursor: pointer;
      }
      .toggle-button.active,
      .toggle-button:hover {
        background-color: #F1B84B;
        color: #fff;
      }
      /* Loading Bar for Quote Calculation */
      .calculating-loading {
        width: 100%;
        height: 4px;
        background: #ddd;
        margin-top: 10px;
        overflow: hidden;
        border-radius: 2px;
      }
      .loading-bar {
        width: 0;
        height: 100%;
        background: #F1B84B;
        animation: loadingAnimation 0.5s ease-out forwards;
      }
      @keyframes loadingAnimation {
        from { width: 0%; }
        to { width: 100%; }
      }
    </style>
  </head>
  <body>
    <div id="app" class="calculator-container">
      <h2>Quick Estimate</h2>
      <!-- Inline Success Message -->
      <div v-if="successMessage" class="alert alert-success" role="alert" style="margin-bottom: 20px;">
        {{ successMessage }}
      </div>
      <!-- Inline Error Message -->
      <div v-if="errorMessage" class="alert alert-danger" role="alert" style="margin-bottom: 20px;">
        {{ errorMessage }}
      </div>
      
      <!-- Step 1: Contact Information -->
      <div v-if="currentStep === 1">
        <div class="contact-info-section">
          <h5>Contact Information</h5>
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input type="text" id="firstName" class="form-control" v-model="firstName" placeholder="Enter your first name" />
          </div>
          <div class="mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text" id="lastName" class="form-control" v-model="lastName" placeholder="Enter your last name" />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" id="email" class="form-control" v-model="email" placeholder="Enter your email" />
          </div>
          <div class="mb-3">
            <label for="phone" class="form-label">Phone Number</label>
            <input type="tel" id="phone" class="form-control" v-model="phone" placeholder="Enter your phone number" />
          </div>
        </div>
        <!-- On Step 1, clicking Next only validates and advances; no contact info is sent yet -->
        <button type="button" class="btn btn-custom w-100" @click="nextStep">Next</button>
      </div>
      
      <!-- Step 2: Project Type Selection -->
      <div v-if="currentStep === 2">
        <div class="nav-back">
          <button type="button" class="btn btn-custom-sm" @click="goBack">&laquo; Back</button>
        </div>
        <p class="mb-3 fw-bold">Select a project type:</p>
        <div class="row g-3">
          <div class="col-md-4" v-for="option in projectOptions" :key="option.value">
            <div class="card project-card" 
                 :class="{ selected: projectType === option.value }" 
                 @click="selectProject(option.value)" 
                 :style="{ backgroundImage: 'url(' + option.image + ')' }">
              <div class="card-overlay"></div>
              <div class="card-body">
                <h5 class="card-title">{{ option.label }}</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Step 3: Project Details & Quote Calculation -->
      <div v-if="currentStep === 3">
        <div class="nav-back">
          <button type="button" class="btn btn-custom-sm" @click="goBack">&laquo; Back</button>
        </div>
        <!-- For Basement Finishing Projects -->
        <div v-if="projectType === 'basement'">
          <h5>Basement Finishing Details</h5>
          <div class="mb-3">
            <label class="form-label">Basement Finishing Option:</label>
            <div class="d-flex">
              <button type="button" class="toggle-button" 
                      :class="{ active: basementMode === 'full' }" 
                      @click="basementMode = 'full'">
                Full Basement Finishing
              </button>
              <button type="button" class="toggle-button" 
                      :class="{ active: basementMode === 'standalone' }" 
                      @click="basementMode = 'standalone'">
                Partial Basement Finishing
              </button>
            </div>
          </div>
          <div v-if="basementMode === 'full'" class="mb-3">
            <label for="area" class="form-label">What size is your basement? (sqft)</label>
            <input type="number" id="area" class="form-control" v-model="area" placeholder="Enter basement size" />
          </div>
          <div class="mb-3">
            <h6>Interior Features:</h6>
            <div class="row g-3">
              <div class="col-md-3" v-for="option in interiorOptions" :key="option.value">
                <div class="card feature-card" 
                     :class="{ selected: interiorFeatures.includes(option.value) }" 
                     @click="toggleInterior(option.value)" 
                     :style="{ backgroundImage: 'url(' + option.image + ')' }">
                  <div class="card-overlay"></div>
                  <div class="card-body">
                    <h6 class="card-title">{{ option.label }}</h6>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <h6>Exterior Features:</h6>
            <div class="row g-3">
              <div class="col-md-3" v-for="option in exteriorOptions" :key="option.value">
                <div class="card feature-card" 
                     :class="{ selected: exteriorFeatures.includes(option.value) }" 
                     @click="toggleExterior(option.value)" 
                     :style="{ backgroundImage: 'url(' + option.image + ')' }">
                  <div class="card-overlay"></div>
                  <div class="card-body">
                    <h6 class="card-title">{{ option.label }}</h6>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <h6>Flooring:</h6>
            <div class="row g-3">
              <div class="col-md-3" v-for="option in flooringOptions" :key="option.value">
                <div class="card feature-card" 
                     :class="{ selected: flooring === option.value }" 
                     @click="selectFlooring(option.value)" 
                     :style="{ backgroundImage: 'url(' + option.image + ')' }">
                  <div class="card-overlay"></div>
                  <div class="card-body">
                    <h6 class="card-title">{{ option.label }}</h6>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-custom w-100" @click="calculateQuote">Calculate Quote</button>
          <div v-if="calculating" class="calculating-loading">
            <div class="loading-bar"></div>
          </div>
        </div>
        <!-- For Other Project Types -->
        <div v-else>
          <div v-if="projectType" class="mb-3">
            <p class="fw-bold">Project Type: {{ getProjectLabel(projectType) }}</p>
          </div>
          <div class="mb-3">
            <label for="area" class="form-label">Area (in square feet)</label>
            <input type="number" id="area" class="form-control" v-model="area" placeholder="Enter area" />
          </div>
          <div class="mb-3">
            <label for="finish" class="form-label">Finish Quality</label>
            <select id="finish" class="form-select" v-model="finish">
              <option value="">Select finish quality</option>
              <option value="basic">Basic</option>
              <option value="standard">Standard</option>
              <option value="premium">Premium</option>
            </select>
          </div>
          <div v-if="projectType === 'kitchen' || projectType === 'bathroom'" class="mb-3">
            <label for="additional" class="form-label">Additional Options (Number of extra fixtures/upgrades)</label>
            <input type="number" id="additional" class="form-control" v-model.number="additional" placeholder="0" />
          </div>
          <button type="button" class="btn btn-custom w-100" @click="calculateQuote">Calculate Quote</button>
          <div v-if="calculating" class="calculating-loading">
            <div class="loading-bar"></div>
          </div>
        </div>
        <div v-if="quote !== null" class="quote-display mt-4 text-center">
          <h4>Your Estimated Project Quote:</h4>
          <p>{{ formatCurrency(quote) }}</p>
        </div>
        <div v-if="quote !== null" class="mt-4 text-center">
          <button type="button" class="btn btn-custom w-100" @click="showBreakdown = !showBreakdown">
            {{ showBreakdown ? "Hide" : "Show" }} Pricing Breakdown
          </button>
        </div>
        <div v-if="showBreakdown" class="mt-3">
          <p><strong>Base Cost:</strong> {{ formatCurrency(baseCost) }}</p>
          <p><strong>Interior Features Cost:</strong> {{ formatCurrency(interiorCost) }}</p>
          <p><strong>Exterior Features Cost:</strong> {{ formatCurrency(exteriorCost) }}</p>
          <p><strong>Total:</strong> {{ formatCurrency(quote) }}</p>
        </div>
        <div v-if="quote !== null" class="mt-4 text-center">
          <button type="button" class="btn btn-custom w-100" @click="submitRequest">Submit Request</button>
        </div>
      </div>
    </div>
    
    <!-- Load EmailJS and Vue.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
      // Initialize EmailJS with your public key
      emailjs.init("qtZ7qNCtaw9RCD3l_");
      
      // Utility function to collect form data from the Vue instance
      function getFormData(vm) {
        return {
          first_name: vm.firstName,
          last_name: vm.lastName,
          from_email: vm.email,
          phone: vm.phone,
          project_type: vm.projectType ? vm.getProjectLabel(vm.projectType) : "",
          area: vm.area,
          finish: vm.finish,
          additional: vm.additional,
          interior_features: vm.interiorFeatures.join(", "),
          exterior_features: vm.exteriorFeatures.join(", "),
          flooring: vm.flooring,
          quote: vm.quote,
          base_cost: vm.baseCost,
          interior_cost: vm.interiorCost,
          exterior_cost: vm.exteriorCost,
          basement_mode: vm.projectType === "basement" ? vm.basementMode : ""
        };
      }
      
      var app = new Vue({
        el: "#app",
        data: {
          currentStep: 1,
          firstName: "",
          lastName: "",
          email: "",
          phone: "",
          projectType: "",
          area: "",
          finish: "",
          additional: 0,
          quote: null,
          baseCost: 0,
          interiorCost: 0,
          exteriorCost: 0,
          showBreakdown: false,
          interiorFeatures: [],
          exteriorFeatures: [],
          flooring: "",
          submitted: false,
          basementMode: "full",
          calculating: false,
          errorMessage: "",
          successMessage: "",
          projectOptions: [
            { value: "basement", label: "Basement Finishing", image: "https://rockdale.ca/wp-content/uploads/2024/02/Copy-of-2CRIK89X15F7-scaled.jpg" },
            { value: "kitchen", label: "Kitchen Renovation", image: "https://rockdale.ca/wp-content/uploads/2024/12/45-IMG_6376.jpg" },
            { value: "bathroom", label: "Bathroom Renovation", image: "https://rockdale.ca/wp-content/uploads/2024/02/Copy-of-22D48NHQ09EV-scaled.jpg" },
            { value: "custom-home", label: "Custom Home", image: "https://rockdale.ca/wp-content/uploads/2024/12/04-IMG_6413.jpg" },
            { value: "fht", label: "Full Home Transformation", image: "https://rockdale.ca/wp-content/uploads/2024/12/16-IMG_6289.jpg" },
            { value: "interiorDesign", label: "Interior Design", image: "https://rockdale.ca/wp-content/uploads/2024/12/16-IMG_6289.jpg" }
          ],
          interiorOptions: [
            { value: "bedroom", label: "Bedroom", image: "https://webphotos.blob.core.windows.net/photos/39-IMG_6358.jpg" },
            { value: "bathroom", label: "Bathroom", image: "https://rockdale.ca/wp-content/uploads/2024/02/Copy-of-22D49TG4WAV8-scaled.jpg" },
            { value: "fullKitchen", label: "Full Kitchen", image: "https://rockdale.ca/wp-content/uploads/2024/02/Copy-of-22D49KF4DMGC-1-scaled.jpg" },
            { value: "wetbar", label: "Wetbar", image: "https://webphotos.blob.core/windows.net/photos/replicate-prediction-yszz5wam6hrge0cmtzs8w65q0m.png" }
          ],
          exteriorOptions: [
            { value: "undergroundDoor", label: "Underground Door Opening", image: "https://webphotos.blob.core.windows.net/photos/IMG_2345.jpg" },
            { value: "aboveGroundDoor", label: "Above Ground Door Opening", image: "https://webphotos.blob.core/windows.net/photos/IMG_1398.jpeg" },
            { value: "egressWindow", label: "New Egress Window", image: "https://webphotos.blob.core/windows.net/photos/Basement-EGRESS-6.jpg" }
          ],
          flooringOptions: [
            { value: "Hardwood", label: "Hardwood", image: "https://webphotos.blob.core/windows.net/photos/everwood-designer-plus-barossa-2-e1669668217311-1-1-2.jpg" },
            { value: "Vinyl", label: "Vinyl", image: "https://webphotos.blob.core/windows.net/photos/42005-469-swatch.jpg" },
            { value: "Carpet", label: "Carpet", image: "https://webphotos.blob.core/windows.net/photos/shopping.jpeg" }
          ],
          rates: {
            kitchen: { basic: 200, standard: 300, premium: 400 },
            bathroom: { basic: 150, standard: 250, premium: 350 },
            "custom-home": { basic: 100, standard: 150, premium: 200 },
            fht: { basic: 120, standard: 180, premium: 240 },
            interiorDesign: { basic: 80, standard: 120, premium: 160 }
          }
        },
        methods: {
          nextStep() {
            this.errorMessage = "";
            this.successMessage = "";
            if (this.currentStep === 1) {
              if (!this.firstName || !this.lastName || !this.email || !this.phone) {
                this.errorMessage = "Please fill out all contact information fields.";
                return;
              }
              // Validate email via backend proxy
              this.validateEmail(this.email).then(valid => {
                if (!valid) {
                  this.errorMessage = "The email address appears to be invalid. Please enter a valid email address.";
                  return;
                }
                // Advance to step 2 (no intermediate success message)
                this.currentStep = 2;
              }).catch(err => {
                console.error("Error validating email:", err);
                this.errorMessage = "Error validating your email. Please try again.";
              });
              return;
            }
            if (this.currentStep === 2) {
              if (!this.projectType) {
                this.errorMessage = "Please select a project type.";
                return;
              }
              this.currentStep = 3;
            }
          },
          goBack() {
            this.errorMessage = "";
            this.successMessage = "";
            if (this.currentStep > 1) this.currentStep--;
          },
          selectProject(value) {
            this.errorMessage = "";
            this.successMessage = "";
            this.projectType = value;
            // Reset project-specific fields
            this.area = "";
            this.finish = "";
            this.additional = 0;
            this.quote = null;
            this.interiorFeatures = [];
            this.exteriorFeatures = [];
            this.flooring = "";
            this.baseCost = 0;
            this.interiorCost = 0;
            this.exteriorCost = 0;
            this.showBreakdown = false;
            if (this.currentStep === 2) {
              this.nextStep();
            }
          },
          getProjectLabel(value) {
            const option = this.projectOptions.find(opt => opt.value === value);
            return option ? option.label : "";
          },
          toggleInterior(feature) {
            const index = this.interiorFeatures.indexOf(feature);
            if (index > -1) this.interiorFeatures.splice(index, 1);
            else this.interiorFeatures.push(feature);
          },
          toggleExterior(feature) {
            if (["undergroundDoor", "aboveGroundDoor"].includes(feature)) {
              this.exteriorFeatures = this.exteriorFeatures.filter(
                f => !(["undergroundDoor", "aboveGroundDoor"].includes(f) && f !== feature)
              );
            }
            const index = this.exteriorFeatures.indexOf(feature);
            if (index > -1) this.exteriorFeatures.splice(index, 1);
            else this.exteriorFeatures.push(feature);
          },
          selectFlooring(value) {
            this.flooring = value;
          },
          calculateQuote() {
            this.errorMessage = "";
            if (this.projectType === "basement" && this.basementMode === "full") {
              const size = parseFloat(this.area);
              if (isNaN(size) || size < 350 || size > 1250) {
                this.errorMessage = "Please enter a valid basement size (between 350 and 1250 sqft).";
                return;
              }
            } else if (this.projectType !== "basement") {
              const numericArea = parseFloat(this.area);
              if (isNaN(numericArea) || numericArea <= 0) {
                this.errorMessage = "Please enter a valid area in square feet.";
                return;
              }
              if (!this.finish) {
                this.errorMessage = "Please select a finish quality.";
                return;
              }
            }
            this.calculating = true;
            setTimeout(() => {
              if (this.projectType === "basement") {
                if (this.basementMode === "full") {
                  const size = parseFloat(this.area);
                  let rate = 0;
                  if (size >= 350 && size < 450) rate = 50;
                  else if (size >= 450 && size < 650) rate = 48;
                  else if (size >= 650 && size < 850) rate = 49;
                  else if (size >= 850 && size < 1050) rate = 40;
                  else if (size >= 1050 && size <= 1250) rate = 40;
                  this.baseCost = size * rate;
                  let interiorCost = 0;
                  const interiorPrices = { bedroom: 4000, bathroom: 12000, fullKitchen: 6500, wetbar: 4000 };
                  this.interiorFeatures.forEach(feature => {
                    if (interiorPrices[feature]) interiorCost += interiorPrices[feature];
                  });
                  this.interiorCost = interiorCost;
                  let exteriorCost = 0;
                  const exteriorPrices = { undergroundDoor: 30000, aboveGroundDoor: 15000, egressWindow: 6000 };
                  this.exteriorFeatures.forEach(feature => {
                    if (exteriorPrices[feature]) exteriorCost += exteriorPrices[feature];
                  });
                  this.exteriorCost = exteriorCost;
                  this.quote = this.baseCost + this.interiorCost + this.exteriorCost;
                } else if (this.basementMode === "standalone") {
                  let interiorCost = 0;
                  const interiorPrices = { bedroom: 6000, bathroom: 14000, fullKitchen: 8500, wetbar: 6000 };
                  this.interiorFeatures.forEach(feature => {
                    if (interiorPrices[feature]) interiorCost += interiorPrices[feature];
                  });
                  this.interiorCost = interiorCost;
                  let exteriorCost = 0;
                  const exteriorPrices = { undergroundDoor: 35000, aboveGroundDoor: 20000, egressWindow: 8000 };
                  this.exteriorFeatures.forEach(feature => {
                    if (exteriorPrices[feature]) exteriorCost += exteriorPrices[feature];
                  });
                  this.exteriorCost = exteriorCost;
                  const premiumFactor = 1;
                  this.baseCost = 0;
                  this.quote = Math.round((this.interiorCost + this.exteriorCost) * premiumFactor);
                }
              } else {
                const numericArea = parseFloat(this.area);
                const rateData = this.rates[this.projectType];
                if (!rateData) {
                  this.errorMessage = "Rates not defined for the selected project type.";
                  this.calculating = false;
                  return;
                }
                const baseRate = rateData[this.finish];
                let total = numericArea * baseRate;
                if (this.projectType === "kitchen" || this.projectType === "bathroom") {
                  total += this.additional * 500;
                }
                this.quote = total;
              }
              this.calculating = false;
            }, 500);
          },
          formatCurrency(amount) {
            return amount.toLocaleString("en-US", { style: "currency", currency: "USD" });
          },
          submitRequest() {
            this.errorMessage = "";
            this.successMessage = "";
            this.submitted = true;
            var data = getFormData(this);
            emailjs.send("service_ec6hztj", "template_65s2w09", data)
              .then(response => {
                const confirmationData = {
                  to_email: this.email,
                  message: "Thank you for your interest in working with us. Someone from the team will get back to you within the next 24-48 hours."
                };
                return emailjs.send("service_ec6hztj", "template_075db7h", confirmationData);
              })
              .then(response => {
                this.successMessage = "Your request has been submitted successfully!";
                setTimeout(() => {
                  this.resetForm();
                }, 3000);
              })
              .catch(error => {
                console.error("EmailJS error:", error);
                this.errorMessage = "There was an error submitting your request. Please try again later.";
              });
          },
          resetForm() {
            this.currentStep = 1;
            this.firstName = "";
            this.lastName = "";
            this.email = "";
            this.phone = "";
            this.projectType = "";
            this.area = "";
            this.finish = "";
            this.additional = 0;
            this.quote = null;
            this.interiorFeatures = [];
            this.exteriorFeatures = [];
            this.flooring = "";
            this.baseCost = 0;
            this.interiorCost = 0;
            this.exteriorCost = 0;
            this.showBreakdown = false;
            this.submitted = false;
            this.basementMode = "full";
            this.errorMessage = "";
            this.successMessage = "";
          },
          handleKeydown(e) {
            if (e.key === "Enter") {
              this.nextStep();
            }
          },
          // Validate email via our backend proxy (NeverBounce)
          validateEmail(email) {
            return fetch(`/api/validate-email?email=${encodeURIComponent(email)}`)
              .then(response => response.json())
              .then(data => {
                if (data.result === "valid" || data.result === "accept_all" || data.result === "catchall") {
                  return true;
                } else {
                  return false;
                }
              })
              .catch(err => {
                console.error("Error validating email:", err);
                return false;
              });
          }
        },
        watch: {
          interiorFeatures: {
            handler(newVal) {
              if (this.quote !== null && this.projectType === "basement") {
                this.calculateQuote();
              }
            },
            deep: true
          },
          exteriorFeatures: {
            handler(newVal) {
              if (this.quote !== null && this.projectType === "basement") {
                this.calculateQuote();
              }
            },
            deep: true
          }
        },
        mounted() {
          window.addEventListener("keydown", this.handleKeydown);
        },
        beforeDestroy() {
          window.removeEventListener("keydown", this.handleKeydown);
        }
      });
    </script>
    <!-- Optional: Include any additional libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.2/iframeResizer.contentWindow.min.js"></script>
  </body>
</html>
